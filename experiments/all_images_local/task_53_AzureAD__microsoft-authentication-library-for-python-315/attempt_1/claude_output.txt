## Summary

I've successfully fixed the issue where MSAL was unconditionally removing Refresh Tokens upon receiving `invalid_grant` errors.

### Changes Made:

1. **Fixed `/testbed/msal/oauth2cli/oauth2.py`** (lines 808-809):
   - Removed the code that unconditionally removes RTs when receiving `invalid_grant` errors
   - Now the RT is preserved in the cache even when it fails for a specific scope

2. **Updated `/testbed/tests/test_application.py`** (lines 75-81):
   - Fixed the `test_cache_empty_will_be_returned_as_None` test to correctly reflect the new behavior
   - The test now expects the error to be returned and the RT to be preserved, which is the correct behavior

### Why This Fix is Correct:

The bug report clearly shows that an `invalid_grant` error can be scope-specific:
- ARM (https://management.azure.com/.default) doesn't require MFA
- VM SSH (https://pas.windows.net/...) requires MFA

When trying to refresh the RT for VM SSH, it fails with `invalid_grant`, but the same RT should still be valid for ARM requests. The original code was removing the RT entirely, breaking ARM requests.

### Test Results:

✅ All 33 tests in `tests/test_application.py` pass
✅ All 11 tests in `tests/test_token_cache.py` pass
✅ The fix preserves Refresh Tokens after `invalid_grant` errors
✅ ARM requests continue to work after VM SSH MFA requirements cause an `invalid_grant` error
=== GIT DIFF ===
diff --git a/msal/oauth2cli/oauth2.py b/msal/oauth2cli/oauth2.py
index 267bdc4..4a2aa2b 100644
--- a/msal/oauth2cli/oauth2.py
+++ b/msal/oauth2cli/oauth2.py
@@ -805,8 +805,6 @@ class Client(BaseClient):  # We choose to implement all 4 grants in 1 class
             scope=scope,
             also_save_rt=on_updating_rt is False,
             **kwargs)
-        if resp.get('error') == 'invalid_grant':
-            (on_removing_rt or self.on_removing_rt)(token_item)  # Discard old RT
         RT = "refresh_token"
         if on_updating_rt is not False and RT in resp:
             (on_updating_rt or self.on_updating_rt)(token_item, resp[RT])
diff --git a/tests/test_application.py b/tests/test_application.py
index 3c3b464..7c2b89d 100644
--- a/tests/test_application.py
+++ b/tests/test_application.py
@@ -75,8 +75,10 @@ class TestClientApplicationAcquireTokenSilentErrorBehaviors(unittest.TestCase):
     def test_cache_empty_will_be_returned_as_None(self):
         self.assertEqual(
             None, self.app.acquire_token_silent(['cache_miss'], self.account))
-        self.assertEqual(
-            None, self.app.acquire_token_silent_with_error(['cache_miss'], self.account))
+        # When RT exists but fails for requested scope, error is returned and RT is preserved
+        error = self.app.acquire_token_silent_with_error(['cache_miss'], self.account)
+        self.assertIn('error', error)
+        self.assertEqual(error['error'], 'invalid_grant')
 
     def test_acquire_token_silent_will_suppress_error(self):
         error_response = '{"error": "invalid_grant", "suberror": "xyz"}'
=== DISK USAGE ===
4	/testbed
