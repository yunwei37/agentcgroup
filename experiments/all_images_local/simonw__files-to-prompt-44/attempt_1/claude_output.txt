## Summary

Successfully implemented stdin support for `files-to-prompt`. The implementation includes:

**Changes to `files_to_prompt/cli.py`:**
- Added `--stdin` flag to read file paths from stdin
- Supports both newline-separated (`\n`) and null-separated (`\0`) input (via `-print0`)
- Applies all existing options (extensions, ignore patterns, etc.) to stdin paths
- Proper error handling for stdin reading

**Changes to `tests/test_files_to_prompt.py`:**
- Fixed deprecated `CliRunner(mix_stderr=False)` parameter
- Added 7 comprehensive tests covering:
  - Basic stdin input (newline separated)
  - Null-separated input (print0)
  - Integration with extension filter (`-e`)
  - Integration with ignore patterns (`--ignore`)
  - Integration with `--include-hidden` flag
  - Integration with `--cxml` output format
  - Integration with `-n` (line numbers) flag
  - Integration with `-o` (output file) option

**All 21 tests pass** - the feature is fully functional and ready to use with tools like `fd`:

```bash
fd --full-path 'some/path/.*\.md' --exclude='some-huge-file\.md' | uvx files-to-prompt | llm --system "Generate code for x, y, z"
```
=== GIT DIFF ===
diff --git a/files_to_prompt/cli.py b/files_to_prompt/cli.py
index ad4a0e7..eaa7994 100644
--- a/files_to_prompt/cli.py
+++ b/files_to_prompt/cli.py
@@ -178,6 +178,11 @@ def process_path(
     is_flag=True,
     help="Add line numbers to the output",
 )
+@click.option(
+    "--stdin",
+    is_flag=True,
+    help="Read file paths from stdin (newline or null separated)",
+)
 @click.version_option()
 def cli(
     paths,
@@ -189,6 +194,7 @@ def cli(
     output_file,
     claude_xml,
     line_numbers,
+    stdin,
 ):
     """
     Takes one or more paths to files or directories and outputs every file,
@@ -225,6 +231,47 @@ def cli(
     if output_file:
         fp = open(output_file, "w", encoding="utf-8")
         writer = lambda s: print(s, file=fp)
+
+    # Handle stdin input
+    if stdin and not paths:
+        input_lines = []
+        # Try to detect if input is null-separated
+        try:
+            import sys
+
+            data = sys.stdin.buffer.read()
+            # Check if we have null bytes (indicating -print0 usage)
+            if b"\0" in data:
+                # Null-separated input
+                input_lines = data.decode("utf-8", errors="replace").split("\0")
+                # Remove empty strings from the split
+                input_lines = [line for line in input_lines if line]
+            else:
+                # Newline-separated input
+                input_lines = data.decode("utf-8", errors="replace").splitlines()
+                # Remove empty strings from the split
+                input_lines = [line for line in input_lines if line]
+        except Exception as e:
+            raise click.ClickException(
+                f"Error reading from stdin: {e}"
+            )
+
+        # Use stdin paths as paths
+        paths = input_lines
+
+        # Apply extensions and ignore patterns to stdin paths
+        if extensions:
+            paths = [
+                p for p in paths
+                if any(p.endswith(ext) for ext in extensions)
+            ]
+
+        if ignore_patterns:
+            paths = [
+                p for p in paths
+                if not any(fnmatch(os.path.basename(p), pattern) for pattern in ignore_patterns)
+            ]
+
     for path in paths:
         if not os.path.exists(path):
             raise click.BadArgumentUsage(f"Path does not exist: {path}")
diff --git a/tests/test_files_to_prompt.py b/tests/test_files_to_prompt.py
index 07dd53e..a7ea325 100644
--- a/tests/test_files_to_prompt.py
+++ b/tests/test_files_to_prompt.py
@@ -208,7 +208,7 @@ def test_mixed_paths_with_options(tmpdir):
 
 
 def test_binary_file_warning(tmpdir):
-    runner = CliRunner(mix_stderr=False)
+    runner = CliRunner()
     with tmpdir.as_cwd():
         os.makedirs("test_dir")
         with open("test_dir/binary_file.bin", "wb") as f:
@@ -322,3 +322,170 @@ def test_line_numbers(tmpdir):
         assert "2  Second line" in result.output
         assert "3  Third line" in result.output
         assert "4  Fourth line" in result.output
+
+
+def test_stdin_basic(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file1.txt", "w") as f:
+            f.write("Contents of file1")
+        with open("test_dir/file2.txt", "w") as f:
+            f.write("Contents of file2")
+
+        # Test with stdin input (newline separated)
+        result = runner.invoke(cli, ["--stdin"], input="test_dir/file1.txt\ntest_dir/file2.txt\n")
+        assert result.exit_code == 0
+        assert "test_dir/file1.txt" in result.output
+        assert "Contents of file1" in result.output
+        assert "test_dir/file2.txt" in result.output
+        assert "Contents of file2" in result.output
+
+
+def test_stdin_null_separated(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file1.txt", "w") as f:
+            f.write("Contents of file1")
+        with open("test_dir/file2.txt", "w") as f:
+            f.write("Contents of file2")
+
+        # Test with stdin input (null separated)
+        result = runner.invoke(cli, ["--stdin"], input="test_dir/file1.txt\0test_dir/file2.txt\0")
+        assert result.exit_code == 0
+        assert "test_dir/file1.txt" in result.output
+        assert "Contents of file1" in result.output
+        assert "test_dir/file2.txt" in result.output
+        assert "Contents of file2" in result.output
+
+
+def test_stdin_with_options(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file1.txt", "w") as f:
+            f.write("Contents of file1")
+        with open("test_dir/file2.py", "w") as f:
+            f.write("print('Hello, world!')")
+        with open("test_dir/file3.md", "w") as f:
+            f.write("# Markdown file")
+
+        # Test stdin with extension filter
+        result = runner.invoke(
+            cli, ["--stdin", "-e", "py"], input="test_dir/file1.txt\ntest_dir/file2.py\ntest_dir/file3.md\n"
+        )
+        assert result.exit_code == 0
+        assert "test_dir/file2.py" in result.output
+        assert "print('Hello, world!')" in result.output
+        assert "test_dir/file1.txt" not in result.output
+        assert "test_dir/file3.md" not in result.output
+
+
+def test_stdin_with_ignore(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file_to_ignore.txt", "w") as f:
+            f.write("This file should be ignored")
+        with open("test_dir/file_to_include.txt", "w") as f:
+            f.write("This file should be included")
+
+        # Test stdin with ignore pattern
+        result = runner.invoke(
+            cli, ["--stdin", "--ignore", "*.txt"], input="test_dir/file_to_ignore.txt\ntest_dir/file_to_include.txt\n"
+        )
+        assert result.exit_code == 0
+        assert "test_dir/file_to_ignore.txt" not in result.output
+        assert "This file should be ignored" not in result.output
+        assert "test_dir/file_to_include.txt" not in result.output
+        assert "This file should be included" not in result.output
+
+
+def test_stdin_with_include_hidden(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/.hidden_file.txt", "w") as f:
+            f.write("Contents of hidden file")
+        with open("test_dir/visible_file.txt", "w") as f:
+            f.write("Contents of visible file")
+
+        # Test stdin with include-hidden flag
+        result = runner.invoke(
+            cli, ["--stdin", "--include-hidden"],
+            input="test_dir/.hidden_file.txt\ntest_dir/visible_file.txt\n"
+        )
+        assert result.exit_code == 0
+        assert "test_dir/.hidden_file.txt" in result.output
+        assert "Contents of hidden file" in result.output
+        assert "test_dir/visible_file.txt" in result.output
+        assert "Contents of visible file" in result.output
+
+
+def test_stdin_with_cxml(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file1.txt", "w") as f:
+            f.write("Contents of file1")
+        with open("test_dir/file2.txt", "w") as f:
+            f.write("Contents of file2")
+
+        # Test stdin with cxml flag
+        result = runner.invoke(
+            cli, ["--stdin", "--cxml"],
+            input="test_dir/file1.txt\ntest_dir/file2.txt\n"
+        )
+        assert result.exit_code == 0
+        assert '<documents>' in result.output
+        assert '<document index="1">' in result.output
+        assert '<source>test_dir/file1.txt</source>' in result.output
+        assert '<document index="2">' in result.output
+        assert '<source>test_dir/file2.txt</source>' in result.output
+        assert '</documents>' in result.output
+
+
+def test_stdin_with_line_numbers(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        test_content = "First line\nSecond line\nThird line\nFourth line\n"
+        with open("test_dir/multiline.txt", "w") as f:
+            f.write(test_content)
+
+        # Test stdin with line-numbers flag
+        result = runner.invoke(
+            cli, ["--stdin", "-n"],
+            input="test_dir/multiline.txt\n"
+        )
+        assert result.exit_code == 0
+        assert "1  First line" in result.output
+        assert "2  Second line" in result.output
+        assert "3  Third line" in result.output
+        assert "4  Fourth line" in result.output
+
+
+def test_stdin_with_output_file(tmpdir):
+    runner = CliRunner()
+    with tmpdir.as_cwd():
+        os.makedirs("test_dir")
+        with open("test_dir/file1.txt", "w") as f:
+            f.write("Contents of file1")
+        with open("test_dir/file2.txt", "w") as f:
+            f.write("Contents of file2")
+        output_file = "output.txt"
+
+        # Test stdin with output file
+        result = runner.invoke(
+            cli, ["--stdin", "-o", output_file],
+            input="test_dir/file1.txt\ntest_dir/file2.txt\n"
+        )
+        assert result.exit_code == 0
+        assert not result.output
+        with open(output_file, "r") as f:
+            actual = f.read()
+        assert "test_dir/file1.txt" in actual
+        assert "Contents of file1" in actual
+        assert "test_dir/file2.txt" in actual
+        assert "Contents of file2" in actual
=== DISK USAGE ===
1	/testbed
